> ```
> 回顾昨天的内容
> 	1.单例模式
> 	2.lambda  表达式
> 	3.Stream流
> ```



### MySQL【重点】

> 每一个知识点都是重要的！！！

### 1.MySQL

> MySQL的历史：
>
> 　　1995年5月23日，MySQL的第一个内部版本发行了。
>
> 　　1996年10月，MySQL 3.11.1发布(MySQL没有2.x版本)，有趣的是，第一个MySQL正式版恰巧只能运行在Sun Solaris上，仿佛昭示了它日后被Sun收购的命运。一个月后，Linux版本出现了。在接下来的两年里，MySQL被依次移植到各个平台，同时加入了不少新的特性。在发布时，MySQL数据库采用的许可策略有些与众不同：允许免费使用，但是不能将MySQL与自己的产品绑定在一起发布。如果想一起发布，就必须使用特殊许可，意味着要花“银子”。当然，商业支持也是需要花“银子”的。其他方面，随用户怎么用都可以。这种特殊许可为MySQL带来了一些收入，从而为它的持续发展打下了良好的基础。
>
> 　　1998年1月，MySQL关系型数据库发行了第一个版本。它使用系统核心的多线程机制提供完全的多线程运行模式，并提供了面向C、C++、Eiffel、Java、Perl、PHP、Python及Tcl等编程语言的编程接口(API)，且支持多种字段类型，并且提供了完整的操作符支持。而且MySQL已经能够运行在10多种操作系统之上，其中包括应用非常广泛的 FreeBSD、Linux、Windows 95和Windows NT等。很快MySQL 3.22也发布了，但它仍然存在很多问题--如不支持事务操作、子查询、外键、存储过程和视图等功能。正因为这些缺陷，当时许多Oracle和SQL Server的用户对MySQL根本不屑一顾。
>
> 　　1999-2000年，MySQL AB公司在瑞典成立。Monty Widenius雇了几个人与Sleepycat合作，开发出了Berkeley DB引擎, 因为BDB支持事务处理，从此MySQL开始支持事务处理了。
>
> 　　2000年4月，MySQL对旧的存储引擎ISAM进行了整理，将其命名为MyISAM。
>
> 　　2001年，Heikki Tuuri向MySQL提出建议，希望能集成他的存储引擎InnoDB，这个引擎同样支持事务处理，还支持行级锁。该引擎之后被证明是最为成功的MySQL事务存储引擎。
>
> 　　2003年12月，MySQL 5.0版本发布，提供了视图、存储过程等功能。
>
> 　　2008年1月，MySQL AB公司被Sun公司以10亿美金收购，MySQL数据库进入Sun时代。在Sun时代，Sun公司对其进行了大量的推广、优化、Bug修复等工作。
>
> 　　2008年11月，MySQL 5.1发布，它提供了分区、事件管理，以及基于行的复制和基于磁盘的NDB集群系统，同时修复了大量的Bug。
>
> 　　2009年4月20日，Oracle公司以74亿美元收购Sun公司，自此MySQL数据库进入Oracle时代，而其第三方的存储引擎InnoDB早在2005年就被Oracle公司收购。
>
> 　　2010年12月，MySQL 5.5发布，其主要新特性包括半同步的复制及对SIGNAL/RESIGNAL的异常处理功能的支持，最重要的是InnoDB存储引擎终于变为当前MySQL的默认存储引擎。MySQL 5.5不是时隔两年后的一次简单的版本更新，而是加强了MySQL各个方面在企业级的特性。Oracle公司同时也承诺MySQL 5.5和未来版本仍是采用GPL授权的开源产品。
>
> 　　2013年2月，MySQL5.6发布。Oracle最近宣布将于2021年2月停止5.6版本的更新，结束其生命周期。
>
> 　　2015年12月，MySQL5.7发布，其性能、新特性、性能分析带来了质的改变。
>
> 　　2016年9月，MySQL开始了8.0版本，Oracle宣称该版本速度是5.7的两倍，性能更好。
>
> 　　2018年4月，MySQL8.0.11发布。
>
>  
>
> 　　目前，MySQL已更新到8.0.18版本，但市场主流都还是使用的5.7版本。

### 2.什么是数据库

> 就是从来存储数据的，现在咱们的各大网站，银行，还有各种app要显示数据，显示的数据在数据库里面存。
>
> 数据库的软件：
>
> ​	在windows系统 需要安装软件，才能写SQL语句 存储数据
>
> ​	关系型数据库：
>
> ​			MySQL  Oracle   SQLServer   DB2   SQLite
>
> ​	非关系型数据库：
>
> ​		redis    mongodb     memorycache
>
> ​	关系型数据存储的数据是表结构的数据  Excele
>
> ​	非关系型数据库存储的是键值对形式的数据

### 3.数据库的概念

> 数据库服务器：
>
> ​		安装好mysql以后，这个就是数据库服务器，服务器支撑
>
> 数据库：
>
> ​		一个项目对应着一个数据库
>
> 数据表：
>
> ​		一个库可以有多张表
>
> 数据和字段
>
> ​	一张表由数据和字段组成
>
> ​		字段  id   name   age   info
>
> ​		数据  1   马驰		78    "喜欢浩然"
>
> 、	数据  2  阔鑫        56     "喜欢马驰"
>
> ​		数据 3   浩然    90        "喜欢阔鑫"

总结：数据库服务器下面可以有很多个数据库，数据库下面可以有很多的数据表，数据表中有很多个数据和字段

### 4.通过命令操作数据库

> 前提是你需要安装好自己的数据库服务器
>
> 并且配置好全局的环境变量，才可以使用以下的命令

```mysql
wind + r： 输入cmd 将命令提示行打开
1.在小黑屏中要先连接数据库服务器（保证数据库服务是开启的）
	C:\Users\bowang>mysql -hlocalhost -uroot -p123456
	# mysql:  告知计算机启动的是哪个服务
	#-hlocalhost:  -h host    localhost  本机   可省略
	#-uroot：  -u user   用户  root
	#-p123456:  -p  password  密码   123456
2.退出服务器
mysql> exit
Bye
连接数据库
C:\Users\bowang>mysql -uroot -p
Enter password: ******

3.先查看所有的数据库
mysql> show databases;
#会有四个默认带的数据库，不要动
4.创建一个数据库
mysql> create database java2309;
5.查询当前创建的库是否存在
mysql> show databases;
6.删除数据库
mysql> drop database emps;
Query OK, 2 rows affected (0.08 sec)
7.看一下是否删除成功
mysql> show databases;
8.我已经创建好了一个数据库 Java2309这个库
在数据库中建表。具体在哪个库下面建表?
选中库
mysql> use java2309;
Database changed
9.在这个Java2309库中查看所有的表
mysql> show tables;
Empty set (0.00 sec)

10.在java2309库中建表
#语法格式: create table  表名 (字段1 数据类型, 字段2 数据类型,...);
mysql> create table person(id int, name varchar(32), age int, info text);
Query OK, 0 rows affected (0.05 sec)
mysql> create table person1(
    -> id int,
    -> name varchar(32),
    -> age int,
    -> info text
    -> );
Query OK, 0 rows affected (0.01 sec)
11.查看表的结构
mysql> desc person;
+-------+-------------+------+-----+---------+-------+
| Field | Type        | Null | Key | Default | Extra |
+-------+-------------+------+-----+---------+-------+
| id    | int(11)     | YES  |     | NULL    |       |
| name  | varchar(32) | YES  |     | NULL    |       |
| age   | int(11)     | YES  |     | NULL    |       |
| info  | text        | YES  |     | NULL    |       |
+-------+-------------+------+-----+---------+-------+
12.再次回顾创建表
mysql> create table person2(
    #id 字段的名字  int  当前字段的数据类型
    -> id int,
    #name  字段的名字  varchar(32) 可变长度的字符串  最大长度是32位
    -> name varchar(32),
    -> age int,
    #info 字段的名字  text 文本类型 也是字符串  不限制长度
    -> info text
    -> );
Query OK, 0 rows affected (0.01 sec)
13.查看所有的表
mysql> show tables;
+--------------------+
| Tables_in_java2309 |
+--------------------+
| person             |
| person1            |
| person2            |
+--------------------+
14.删除表
mysql> drop table person2;
Query OK, 0 rows affected (0.01 sec)
15.查看所有的表 验证是否删除成功
mysql> show tables;
+--------------------+
| Tables_in_java2309 |
+--------------------+
| person             |
| person1            |
+--------------------+

#额外讲两个不重要的命令
mysql> show create database java2309;
+----------+-------------------------------------------------------------------+
| Database | Create Database                                                   |
+----------+-------------------------------------------------------------------+
| java2309 | CREATE DATABASE `java2309` /*!40100 DEFAULT CHARACTER SET utf8 */ |
+----------+-------------------------------------------------------------------+
mysql> show create table person;
+--------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table  | Create Table                                                                                                                                                             |
+--------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| person | CREATE TABLE `person` (
  `id` int(11) DEFAULT NULL,
  `name` varchar(32) DEFAULT NULL,
  `age` int(11) DEFAULT NULL,
  `info` text
) ENGINE=InnoDB DEFAULT CHARSET=utf8 |
+--------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
```

https://www.w3school.com.cn/sql/sql_datatypes.asp

以上的网站是数据库字段的数据类型，大家可以提前查看一下

### 5.修改表【alter】【非重点】

> 表已经创建好了，能不能修改表的结构?比如给表添加一个字段，给字段改名字,改字段的数据类型 可以的
>
> 修改表中的字段

```mysql
mysql> desc person;
+-------+-------------+------+-----+---------+-------+
| Field | Type        | Null | Key | Default | Extra |
+-------+-------------+------+-----+---------+-------+
| id    | int(11)     | YES  |     | NULL    |       |
| name  | varchar(32) | YES  |     | NULL    |       |
| age   | int(11)     | YES  |     | NULL    |       |
| info  | text        | YES  |     | NULL    |       |
+-------+-------------+------+-----+---------+-------+
4 rows in set (0.00 sec)
1.删除info字段   #语法格式:    alter table 表名 drop 字段;
mysql>alter table person drop info;
2.已经删除成功 看是否删除成功
mysql> desc person;
+-------+-------------+------+-----+---------+-------+
| Field | Type        | Null | Key | Default | Extra |
+-------+-------------+------+-----+---------+-------+
| id    | int(11)     | YES  |     | NULL    |       |
| name  | varchar(32) | YES  |     | NULL    |       |
| age   | int(11)     | YES  |     | NULL    |       |
+-------+-------------+------+-----+---------+-------+
3 rows in set (0.01 sec)
3.在当前表中添加字段#语法格式:  alter table 表名 add 字段 数据类型;
#注释:   sql中的boolean数据类型是tinyint(小的int类型的数据)
mysql> alter table person add sex boolean;
Query OK, 0 rows affected (0.02 sec)
Records: 0  Duplicates: 0  Warnings: 0


mysql> desc person;
+-------+-------------+------+-----+---------+-------+
| Field | Type        | Null | Key | Default | Extra |
+-------+-------------+------+-----+---------+-------+
| id    | int(11)     | YES  |     | NULL    |       |
| name  | varchar(32) | YES  |     | NULL    |       |
| age   | int(11)     | YES  |     | NULL    |       |
| sex   | tinyint(1)  | YES  |     | NULL    |       |
+-------+-------------+------+-----+---------+-------+
4 rows in set (0.00 sec)
#4.修改某一个字段的数据类型  name字段数据类型是  varchar  想把他变成char
#varchar和char类型的额数据区别：
#char:保存固定长度的字符串（可包含字母、数字以及特殊字符）。在括号中指定字符串的长度。最多 255 个字符。
#varchar：保存可变长度的字符串（可包含字母、数字以及特殊字符）。在括号中指定字符串的最大长度。最多 255 个字符。

#注释：如果值的长度大于 255，则被转换为 TEXT 类型。
#语法格式:  alter table 表名 modify 字段 新的数据类型;
mysql> alter table person modify name char(32);
Query OK, 0 rows affected (0.03 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc person;
+-------+------------+------+-----+---------+-------+
| Field | Type       | Null | Key | Default | Extra |
+-------+------------+------+-----+---------+-------+
| id    | int(11)    | YES  |     | NULL    |       |
| name  | char(32)   | YES  |     | NULL    |       |
| age   | int(11)    | YES  |     | NULL    |       |
| sex   | tinyint(1) | YES  |     | NULL    |       |
+-------+------------+------+-----+---------+-------+
#5.即修改字段的名字 也修改字段的数据类型
#语法格式:  alter table 表名 change 老字段 新字段  新的数据类型;
mysql> alter table person change sex gender int;
Query OK, 0 rows affected (0.02 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc person;
+--------+----------+------+-----+---------+-------+
| Field  | Type     | Null | Key | Default | Extra |
+--------+----------+------+-----+---------+-------+
| id     | int(11)  | YES  |     | NULL    |       |
| name   | char(32) | YES  |     | NULL    |       |
| age    | int(11)  | YES  |     | NULL    |       |
| gender | int(11)  | YES  |     | NULL    |       |
+--------+----------+------+-----+---------+-------+

#6.在age的后面添加一个新的字段  salary  薪资  数据类型
#FLOAT(size,d)	带有浮动小数点的小数字。在括号中规定最大位数。在 d 参数中规定小数点右侧的最大位数。
#DOUBLE(size,d)	带有浮动小数点的大数字。在括号中规定最大位数。在 d 参数中规定小数点右侧的最大位数。
#DECIMAL(size,d)	作为字符串存储的 DOUBLE 类型，允许固定的小数点。
mysql> alter table person add salary decimal(9, 2) after age;
Query OK, 0 rows affected (0.03 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc person;
+--------+--------------+------+-----+---------+-------+
| Field  | Type         | Null | Key | Default | Extra |
+--------+--------------+------+-----+---------+-------+
| id     | int(11)      | YES  |     | NULL    |       |
| name   | char(32)     | YES  |     | NULL    |       |
| age    | int(11)      | YES  |     | NULL    |       |
| salary | decimal(9,2) | YES  |     | NULL    |       |
| gender | int(11)      | YES  |     | NULL    |       |
+--------+--------------+------+-----+---------+-------+
5 rows in set (0.00 sec)
#7.添加一个字段 时间字段 
mysql> alter table person add regTime timestamp default current_timestamp;
Query OK, 0 rows affected (0.02 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc person;
+---------+--------------+------+-----+-------------------+-------+
| Field   | Type         | Null | Key | Default           | Extra |
+---------+--------------+------+-----+-------------------+-------+
| id      | int(11)      | YES  |     | NULL              |       |
| name    | char(32)     | YES  |     | NULL              |       |
| age     | int(11)      | YES  |     | NULL              |       |
| salary  | decimal(9,2) | YES  |     | NULL              |       |
| gender  | int(11)      | YES  |     | NULL              |       |
| regTime | timestamp    | NO   |     | CURRENT_TIMESTAMP |       |
+---------+--------------+------+-----+-------------------+-------+

```

总结/:

```
数据类型:
	1.number
		int(11)
		tinyint
		decimal
		
	2.字符串
		varchar
		char
		text
	3.时间
		timestamp
```

库创建好了，库下面的表创建好了，表字段有了，表数据有没有啊？没有，因为学数据库的目的就是为了数据的。

### 6.添加数据到表中



INSERT INTO 语句用于向表格中插入新的行数据。



插入数据的时候，一定要注意表的字段的顺序，写values值的时候，是按照字段名字排好的

```
INSERT INTO 表名称 VALUES (值1, 值2,....)
```

我们也可以指定所要插入数据的列：

```
INSERT INTO table_name (列1, 列2,...) VALUES (值1, 值2,....)
```

```mysql
mysql> desc person;
+---------+--------------+------+-----+-------------------+-------+
| Field   | Type         | Null | Key | Default           | Extra |
+---------+--------------+------+-----+-------------------+-------+
| id      | int(11)      | YES  |     | NULL              |       |
| name    | char(32)     | YES  |     | NULL              |       |
| age     | int(11)      | YES  |     | NULL              |       |
| salary  | decimal(9,2) | YES  |     | NULL              |       |
| gender  | int(11)      | YES  |     | NULL              |       |
| regTime | timestamp    | NO   |     | CURRENT_TIMESTAMP |       |
+---------+--------------+------+-----+-------------------+-------+
6 rows in set (0.00 sec)
1.咋看表中的数据
mysql> select * from person;#查询所有的字段的数据 从person表中查
Empty set (0.00 sec)
2.数据为空，我就插入数据
mysql> insert into person values(1, "老邢", 12, 89272.78, 1,now());
Query OK, 1 row affected (0.01 sec)

mysql> select * from person;
+------+--------+------+----------+--------+---------------------+
| id   | name   | age  | salary   | gender | regTime             |
+------+--------+------+----------+--------+---------------------+
|    1 | 老邢   |   12 | 89272.78 |      1 | 2023-06-28 15:25:10 |
+------+--------+------+----------+--------+---------------------+
3.按照字段进行插入。（常用的！！！）
mysql> insert into person (id, name, age, salary) values (2, "骚磊", 34, 27288.98);
Query OK, 1 row affected (0.00 sec)

mysql> select * from person;
+------+--------+------+----------+--------+---------------------+
| id   | name   | age  | salary   | gender | regTime             |
+------+--------+------+----------+--------+---------------------+
|    1 | 老邢   |   12 | 89272.78 |      1 | 2023-06-28 15:25:10 |
|    2 | 骚磊   |   34 | 27288.98 |   NULL | 2023-06-28 15:28:18 |
+------+--------+------+----------+--------+---------------------+

mysql> insert into person(age , name, id, gender, salary) values(78, '豪哥', 3, 0, 2637363.45);
Query OK, 1 row affected (0.00 sec)

mysql> select * from person;
+------+--------+------+------------+--------+---------------------+
| id   | name   | age  | salary     | gender | regTime             |
+------+--------+------+------------+--------+---------------------+
|    1 | 老邢   |   12 |   89272.78 |      1 | 2023-06-28 15:25:10 |
|    2 | 骚磊   |   34 |   27288.98 |   NULL | 2023-06-28 15:28:18 |
|    3 | 豪哥   |   78 | 2637363.45 |      0 | 2023-06-28 15:31:31 |
+------+--------+------+------------+--------+---------------------+
#扩展:一次性插入多条数据
mysql> insert into person(id, name) values(4, "世齐"), (5, '永杰'),(6, "狗蛋");
Query OK, 3 rows affected (0.00 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql> select * from person;
+------+--------+------+------------+--------+---------------------+
| id   | name   | age  | salary     | gender | regTime             |
+------+--------+------+------------+--------+---------------------+
|    1 | 老邢   |   12 |   89272.78 |      1 | 2023-06-28 15:25:10 |
|    2 | 骚磊   |   34 |   27288.98 |   NULL | 2023-06-28 15:28:18 |
|    3 | 豪哥   |   78 | 2637363.45 |      0 | 2023-06-28 15:31:31 |
|    4 | 世齐   | NULL |       NULL |   NULL | 2023-06-28 15:34:01 |
|    5 | 永杰   | NULL |       NULL |   NULL | 2023-06-28 15:34:01 |
|    6 | 狗蛋   | NULL |       NULL |   NULL | 2023-06-28 15:34:01 |
+------+--------+------+------------+--------+---------------------+

```

### 7.删除数据【慎用】

总结:

```
删除库，删除表，删除字段  都是使用drop
删除数据  delete
```



> DELETE 语句用于删除表中的行。
>
> 语法:
>
> ```
> DELETE FROM 表名称 WHERE 列名称 = 值
> ```

```mysql
mysql> select * from person;
+------+--------+------+------------+--------+---------------------+
| id   | name   | age  | salary     | gender | regTime             |
+------+--------+------+------------+--------+---------------------+
|    1 | 老邢   |   12 |   89272.78 |      1 | 2023-06-28 15:25:10 |
|    2 | 骚磊   |   34 |   27288.98 |   NULL | 2023-06-28 15:28:18 |
|    3 | 豪哥   |   78 | 2637363.45 |      0 | 2023-06-28 15:31:31 |
|    4 | 世齐   | NULL |       NULL |   NULL | 2023-06-28 15:34:01 |
|    5 | 永杰   | NULL |       NULL |   NULL | 2023-06-28 15:34:01 |
|    6 | 狗蛋   | NULL |       NULL |   NULL | 2023-06-28 15:34:01 |
+------+--------+------+------------+--------+---------------------+
6 rows in set (0.00 sec)
1.删除id为4 的数据
mysql> delete from person where id = 4;
Query OK, 1 row affected (0.01 sec)

mysql> select * from person;
+------+--------+------+------------+--------+---------------------+
| id   | name   | age  | salary     | gender | regTime             |
+------+--------+------+------------+--------+---------------------+
|    1 | 老邢   |   12 |   89272.78 |      1 | 2023-06-28 15:25:10 |
|    2 | 骚磊   |   34 |   27288.98 |   NULL | 2023-06-28 15:28:18 |
|    3 | 豪哥   |   78 | 2637363.45 |      0 | 2023-06-28 15:31:31 |
|    5 | 永杰   | NULL |       NULL |   NULL | 2023-06-28 15:34:01 |
|    6 | 狗蛋   | NULL |       NULL |   NULL | 2023-06-28 15:34:01 |
+------+--------+------+------------+--------+---------------------+
2.删除名字 为狗蛋的数据
mysql> delete from person where name = "狗蛋";
Query OK, 1 row affected (0.01 sec)

mysql> select * from person;
+------+--------+------+------------+--------+---------------------+
| id   | name   | age  | salary     | gender | regTime             |
+------+--------+------+------------+--------+---------------------+
|    1 | 老邢   |   12 |   89272.78 |      1 | 2023-06-28 15:25:10 |
|    2 | 骚磊   |   34 |   27288.98 |   NULL | 2023-06-28 15:28:18 |
|    3 | 豪哥   |   78 | 2637363.45 |      0 | 2023-06-28 15:31:31 |
|    5 | 永杰   | NULL |       NULL |   NULL | 2023-06-28 15:34:01 |
+------+--------+------+------------+--------+---------------------+
3.删除多条数据
mysql> delete from person where id in(2, 5);
Query OK, 2 rows affected (0.00 sec)

mysql> select * from person;
+------+--------+------+------------+--------+---------------------+
| id   | name   | age  | salary     | gender | regTime             |
+------+--------+------+------------+--------+---------------------+
|    1 | 老邢   |   12 |   89272.78 |      1 | 2023-06-28 15:25:10 |
|    3 | 豪哥   |   78 | 2637363.45 |      0 | 2023-06-28 15:31:31 |
+------+--------+------+------------+--------+---------------------+
2 rows in set (0.00 sec)
4.删除数据的一定要加条件，如果不加，会出现问题。后果自负！！！
delete from person;#全删除数据  错误的演示

```

### 8.修改数据【慎用】

> Update 语句用于修改表中的数据。
>
> 语法：
>
> ```
> UPDATE 表名称 SET 列名称1 = 新值1，列2=新值2，列3=新值3.... WHERE 列名称 = 某值
> ```

```mysql
mysql> select * from person;
+------+--------+------+------------+--------+---------------------+
| id   | name   | age  | salary     | gender | regTime             |
+------+--------+------+------------+--------+---------------------+
|    1 | 老邢   |   12 |   89272.78 |      1 | 2023-06-28 15:25:10 |
|    3 | 豪哥   |   78 | 2637363.45 |      0 | 2023-06-28 15:31:31 |
+------+--------+------+------------+--------+---------------------+
2 rows in set (0.00 sec)

mysql> update person set name="猪头肉", age = 89 where id = 1;
Query OK, 1 row affected (0.01 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> select * from person;
+------+-----------+------+------------+--------+---------------------+
| id   | name      | age  | salary     | gender | regTime             |
+------+-----------+------+------------+--------+---------------------+
|    1 | 猪头肉    |   89 |   89272.78 |      1 | 2023-06-28 15:25:10 |
|    3 | 豪哥      |   78 | 2637363.45 |      0 | 2023-06-28 15:31:31 |
+------+-----------+------+------------+--------+---------------------+

```

### 9.事务的操作【入门级别】

```mysql
mysql> insert into person(id, name, age, salary, gender) values(4, "李聪", 25, 1000, 0);
Query OK, 1 row affected (0.00 sec)

mysql> insert into person(id, name, age, salary, gender) values(5, "世豪", 25, 800, 0);
Query OK, 1 row affected (0.00 sec)

mysql> select * from person;
+------+-----------+------+------------+--------+---------------------+
| id   | name      | age  | salary     | gender | regTime             |
+------+-----------+------+------------+--------+---------------------+
|    1 | 猪头肉    |   89 |   89272.78 |      1 | 2023-06-28 15:25:10 |
|    3 | 豪哥      |   78 | 2637363.45 |      0 | 2023-06-28 15:31:31 |
|    4 | 李聪      |   25 |    1000.00 |      0 | 2023-06-28 16:15:16 |
|    5 | 世豪      |   25 |     800.00 |      0 | 2023-06-28 16:16:11 |
+------+-----------+------+------------+--------+---------------------+
#为了保证数据的安全性的！！！
#李聪转给世豪 100块钱
#一句话要两个sql语句   都是修改！！！
#要想使用事务，必须开启事务（关闭自动提交），默认事务是关闭的可以换句话说 
mysql> set autocommit = 0;#g关闭自动提交，你写的增删改这些SQL语句不会立即执行。
Query OK, 0 rows affected (0.01 sec)
mysql> update person set salary = salary - 100 where id = 4;
Query OK, 1 row affected (0.01 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> select * from person;
+------+-----------+------+------------+--------+---------------------+
| id   | name      | age  | salary     | gender | regTime             |
+------+-----------+------+------------+--------+---------------------+
|    1 | 猪头肉    |   89 |   89272.78 |      1 | 2023-06-28 15:25:10 |
|    3 | 豪哥      |   78 | 2637363.45 |      0 | 2023-06-28 15:31:31 |
|    4 | 李聪      |   25 |     900.00 |      0 | 2023-06-28 16:15:16 |
|    5 | 世豪      |   25 |     800.00 |      0 | 2023-06-28 16:16:11 |
+------+-----------+------+------------+--------+---------------------+
4 rows in set (0.00 sec)

mysql>  update person set salary = salary + 100 where id = 5;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> select * from person;
+------+-----------+------+------------+--------+---------------------+
| id   | name      | age  | salary     | gender | regTime             |
+------+-----------+------+------------+--------+---------------------+
|    1 | 猪头肉    |   89 |   89272.78 |      1 | 2023-06-28 15:25:10 |
|    3 | 豪哥      |   78 | 2637363.45 |      0 | 2023-06-28 15:31:31 |
|    4 | 李聪      |   25 |     900.00 |      0 | 2023-06-28 16:15:16 |
|    5 | 世豪      |   25 |     900.00 |      0 | 2023-06-28 16:16:11 |
+------+-----------+------+------------+--------+---------------------+
4 rows in set (0.00 sec)
再打开一个窗体发现李聪和世豪的钱都没有变化。
接下来有两条路可以走1.回滚（rollback） 回到原来sql语句执行的状态 2.提交（commit）真正的去执行两个sql语句
mysql> rollback;
Query OK, 0 rows affected (0.01 sec)

mysql> select * from person;
+------+-----------+------+------------+--------+---------------------+
| id   | name      | age  | salary     | gender | regTime             |
+------+-----------+------+------------+--------+---------------------+
|    1 | 猪头肉    |   89 |   89272.78 |      1 | 2023-06-28 15:25:10 |
|    3 | 豪哥      |   78 | 2637363.45 |      0 | 2023-06-28 15:31:31 |
|    4 | 李聪      |   25 |    1000.00 |      0 | 2023-06-28 16:15:16 |
|    5 | 世豪      |   25 |     800.00 |      0 | 2023-06-28 16:16:11 |
+------+-----------+------+------------+--------+---------------------+
4 rows in set (0.00 sec)

mysql> update person set salary = salary - 100 where id = 4;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql>  update person set salary = salary + 100 where id = 5;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> commit;
Query OK, 0 rows affected (0.00 sec)

mysql> select * from person;
+------+-----------+------+------------+--------+---------------------+
| id   | name      | age  | salary     | gender | regTime             |
+------+-----------+------+------------+--------+---------------------+
|    1 | 猪头肉    |   89 |   89272.78 |      1 | 2023-06-28 15:25:10 |
|    3 | 豪哥      |   78 | 2637363.45 |      0 | 2023-06-28 15:31:31 |
|    4 | 李聪      |   25 |     900.00 |      0 | 2023-06-28 16:15:16 |
|    5 | 世豪      |   25 |     900.00 |      0 | 2023-06-28 16:16:11 |
+------+-----------+------+------------+--------+---------------------+

测试用sql命令关闭自动提交之后是否还是关闭关闭
```

总结：三个命令

```
set autocommit=0;关闭自动提交
增删改sql  不会自动提交
会有两种状态：
	要么回滚 roolbakc; 增删改sql语句没有执行
	要么提交 commit; 增删改sql语句执行
```

###  10.查询【重点】

> SELECT 语句用于从表中选取数据。
>
> 结果被存储在一个结果表中（称为结果集）。
>
> ### SQL SELECT 语法
>
> ```
> SELECT 列名称 FROM 表名称
> ```
>
> 以及：
>
> ```
> SELECT * FROM 表名称
> ```
>
> **注释：**SQL 语句对大小写不敏感。SELECT 等效于 select。

```mysql
#根据指定的字段 查询所有的行数据
mysql> select name,age, salary from person;
+--------+------+------------+
| name   | age  | salary     |
+--------+------+------------+
| 豪哥   |   78 | 2637363.45 |
| 李聪   |   25 |     900.00 |
| 世豪   |   25 |     900.00 |
+--------+------+------------+
mysql> select * from person;
+------+--------+------+------------+--------+---------------------+
| id   | name   | age  | salary     | gender | regTime             |
+------+--------+------+------------+--------+---------------------+
|    3 | 豪哥   |   78 | 2637363.45 |      0 | 2023-06-28 15:31:31 |
|    4 | 李聪   |   25 |     900.00 |      0 | 2023-06-28 16:15:16 |
|    5 | 世豪   |   25 |     900.00 |      0 | 2023-06-28 16:16:11 |
+------+--------+------+------------+--------+---------------------+
3 rows in set (0.00 sec)
```

> 如果咱们需要有条件的查询的话，可以将where 关键加入到select语句中
>
> 语法格式:
>
> ```
> SELECT 列名称 FROM 表名称 WHERE 列 运算符 值
> ```

下面的运算符可在 WHERE 子句中使用：

| 运算符  | 描述         |
| :------ | :----------- |
| =       | 等于         |
| <>      | 不等于       |
| >       | 大于         |
| <       | 小于         |
| >=      | 大于等于     |
| <=      | 小于等于     |
| BETWEEN | 在某个范围内 |
| LIKE    | 搜索某种模式 |

**注释：**在某些版本的 SQL 中，操作符 <> 可以写为 !=。

```mysql
#查询所有字段的数据 从person表中  id为4的  直译
mysql> select * from person where id = 4;
+------+--------+------+--------+--------+---------------------+
| id   | name   | age  | salary | gender | regTime             |
+------+--------+------+--------+--------+---------------------+
|    4 | 李聪   |   25 | 900.00 |      0 | 2023-06-28 16:15:16 |
+------+--------+------+--------+--------+---------------------+
1 row in set (0.02 sec)
#不等于
mysql> select * from person where id != 4;
+------+--------+------+------------+--------+---------------------+
| id   | name   | age  | salary     | gender | regTime             |
+------+--------+------+------------+--------+---------------------+
|    3 | 豪哥   |   78 | 2637363.45 |      0 | 2023-06-28 15:31:31 |
|    5 | 世豪   |   25 |     900.00 |      0 | 2023-06-28 16:16:11 |
+------+--------+------+------------+--------+---------------------+
2 rows in set (0.00 sec)
#
mysql> select * from person where age < 74;
+------+--------+------+--------+--------+---------------------+
| id   | name   | age  | salary | gender | regTime             |
+------+--------+------+--------+--------+---------------------+
|    4 | 李聪   |   25 | 900.00 |      0 | 2023-06-28 16:15:16 |
|    5 | 世豪   |   25 | 900.00 |      0 | 2023-06-28 16:16:11 |
+------+--------+------+--------+--------+---------------------+
#between  是在一个范围进行搜索
mysql> select * from person where age between 78 and 89;
+------+--------+------+------------+--------+---------------------+
| id   | name   | age  | salary     | gender | regTime             |
+------+--------+------+------------+--------+---------------------+
|    3 | 豪哥   |   78 | 2637363.45 |      0 | 2023-06-28 15:31:31 |
+------+--------+------+------------+--------+---------------------+
1 row in set (0.00 sec)

mysql> select * from person where age >=78 and age <= 89;
+------+--------+------+------------+--------+---------------------+
| id   | name   | age  | salary     | gender | regTime             |
+------+--------+------+------------+--------+---------------------+
|    3 | 豪哥   |   78 | 2637363.45 |      0 | 2023-06-28 15:31:31 |
+------+--------+------+------------+--------+---------------------+

#like  模糊查询
mysql> select * from person where name like "%豪%";
+------+--------+------+------------+--------+---------------------+
| id   | name   | age  | salary     | gender | regTime             |
+------+--------+------+------------+--------+---------------------+
|    3 | 豪哥   |   78 | 2637363.45 |      0 | 2023-06-28 15:31:31 |
|    5 | 世豪   |   25 |     900.00 |      0 | 2023-06-28 16:16:11 |
|    6 | 阿豪   |   56 |    8292.00 |      1 | 2023-06-28 17:01:13 |
+------+--------+------+------------+--------+---------------------+
3 rows in set (0.00 sec)
```

